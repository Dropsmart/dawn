<div class="product__accordion accordion quick-add-hidden" {{ shopify_attributes }}>
  <details id="Details-{{ id }}-{{ section.id }}">
    <summary>
      <div class="summary__title">
        {% render 'icon-accordion', icon: icon %}
        <h2 class="h4 accordion__title">
          {{ heading }}
        </h2>
      </div>
      {% render 'icon-caret' %}
    </summary>
    <div class="accordion__content rte" id="orderbump-{{ id }}-{{ section.id }}">
      <select  id="dropdown-{{ id }}-{{ section.id }}" name="dropdown" onchange="changeDDL()" >
          <option value='0'> Select {{heading}} </options>
          {% for product in collection %}
              {% if product.tags contains tag %}
                  <option value="order-{{product.id}}">{{product.title }}</option>
              {% endif %}
          {% endfor %}
      </select>
      <div class="box-select">
        {% for product in collection %}
          {% if product.tags contains tag %}
            {% unless product.has_only_default_variant %}
              <sitelite-selector data-url="{{ product.url}}" data-section="{{ section.id }}" id="order-{{product.id}}-{{ id }}-{{ section.id }}" style='display:none'>
                {% for option in product.options_with_values %}
                    <label for="Option-{{ section.id }}-{{ forloop.index0 }}">{{ option.name }}</label>

                    <div class="my-2">
                        <select
                            name="options[{{ option.name | escape }}]"
                            id="Option-{{ section.id }}-{{ forloop.index0 }}"
                            class="w-full border py-3 px-3 selectVariant "
                            data-section="{{ section.id }}"
                        >
                            {% assign count = 0 %}
                            {% for value in option.values %}
                              {% assign count = count | plus:1 %}
                              <option
                                  value="{{ value | escape }}"
                                  {% if option.selected_value == value %}
                                      selected="selected"
                                  {% endif %}
                                  data-image="{{product.variants[count ].featured_image.src}}"
                                  id="el{{product.variants[count ].id}}"
                              >
                                {{ value }}
                              </option>
                            {% endfor %}
                        </select>
                    </div>

                    <script type="application/json">
                        {{ product.variants | json }}
                    </script>

                {% endfor %}
              </sitelite-selector>
            {% endunless %}
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </details>
</div>

<script>

        var ddl = document.querySelector('#dropdown-{{ id }}-{{ section.id }}');

        var prevEl;
        function changeDDL(){
          if(prevEl){
            prevEl.style.display = "none";
          }
          var id = ddl.value;
          if (id) {
            console.log(id);
            var el = document.querySelector('#'+id+'{{-{{ id }}-{{ section.id }}}}');
            el.style.display = "block";
            prevEl = el;
          }
        }

</script>